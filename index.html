<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STATCOM Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js" integrity="sha512-CQBWl4fJHWbryGE+Pc7UAxWMUMNMWzWxF4SQo9CgkJIN1kx6djDQZjh3Y8SZ1d+6I+1zze6Z7kHXO7q3UyZAWw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>STATCOM</h1>
                <p>Control Panel</p>
            </div>
            <nav class="sidebar-nav">
                <a href="#/config" class="nav-item" data-route="/config">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-label">Config</span>
                </a>
                <a href="#/module-overview" class="nav-item" data-route="/module-overview">
                    <span class="nav-icon">üî≤</span>
                    <span class="nav-label">Module Overview</span>
                </a>
                <a href="#/diagnostics" class="nav-item" data-route="/diagnostics">
                    <span class="nav-icon">üîç</span>
                    <span class="nav-label">Diagnostics</span>
                </a>
                <a href="#/trends" class="nav-item" data-route="/trends">
                    <span class="nav-icon">üìà</span>
                    <span class="nav-label">Trends</span>
                </a>
                <a href="#/alarms" class="nav-item" data-route="/alarms">
                    <span class="nav-icon">üîî</span>
                    <span class="nav-label">Alarms</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Config View -->
            <div id="view-config" class="view">
                <div class="view-header">
                    <h2>Configuration</h2>
                    <p>Connection settings and system configuration</p>
                </div>
                <div class="view-content">
                    <!-- Connection Settings Card -->
                    <div class="card connection-card">
                        <h3>Connection Settings</h3>
                        
                        <!-- Connection Status -->
                        <div class="connection-status-header">
                            <div class="status-indicator">
                                <span class="status-badge status-disconnected" id="status-badge"></span>
                                <span class="status-text" id="status-text">Disconnected</span>
                            </div>
                            <div class="last-connected" id="last-connected-time">
                                Never connected
                            </div>
                        </div>
                        
                        <!-- Connection Form -->
                        <div class="connection-form">
                            <div class="form-group">
                                <label for="ip-address-input">IP Address:</label>
                                <input type="text" id="ip-address-input" value="192.168.1.100" placeholder="192.168.1.100">
                                <span class="error-message" id="ip-error"></span>
                            </div>
                            <div class="form-group">
                                <label for="port-input">Port:</label>
                                <input type="number" id="port-input" value="502" placeholder="502" min="1" max="65535">
                                <span class="error-message" id="port-error"></span>
                            </div>
                            <div class="form-group">
                                <label for="password-input">Password:</label>
                                <div class="password-input-wrapper">
                                    <input type="password" id="password-input" placeholder="Enter password">
                                    <button type="button" class="password-toggle" id="password-toggle" aria-label="Show password">
                                        <span class="toggle-icon">üëÅÔ∏è</span>
                                    </button>
                                </div>
                                <span class="error-message" id="password-error"></span>
                            </div>
                            
                            <!-- Connection Info (shown when connected) -->
                            <div class="connection-info" id="connection-info" style="display: none;">
                                <div class="connection-details">
                                    <span class="connection-label">Connected to:</span>
                                    <span class="connection-value" id="connection-address">-</span>
                                </div>
                                <div class="connection-details">
                                    <span class="connection-label">Uptime:</span>
                                    <span class="connection-value" id="connection-uptime">-</span>
                                </div>
                            </div>
                            
                            <!-- Connection Buttons -->
                            <div class="connection-buttons">
                                <button id="connect-btn" class="btn btn-primary connect-btn">
                                    Connect
                                </button>
                                <button id="disconnect-btn" class="btn btn-secondary disconnect-btn" style="display: none;">
                                    Disconnect
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- General Settings Card (Keep existing) -->
                    <div class="card">
                        <h3>General Settings</h3>
                        <div class="form-group">
                            <label>System Name:</label>
                            <input type="text" value="STATCOM-001" readonly>
                        </div>
                        <div class="form-group">
                            <label>Operating Mode:</label>
                            <select>
                                <option>Automatic</option>
                                <option>Manual</option>
                                <option>Standby</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Voltage Level:</label>
                            <input type="text" value="11 kV" readonly>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Module Overview View -->
            <div id="view-module-overview" class="view">
                <div class="view-header">
                    <h2>Module Overview</h2>
                    <p>64 modules in 8x8 grid - Click any module to view detailed status</p>
                </div>
                <div class="module-overview-container">
                    <!-- Module Grid -->
                    <div class="module-grid" id="module-grid">
                        <!-- Modules will be dynamically inserted here -->
                    </div>
                    <!-- Module Detail Panel -->
                    <div class="module-detail-panel" id="module-detail-panel">
                        <!-- Status legend or module details will be shown here -->
                    </div>
                </div>
            </div>

            <!-- Diagnostics View -->
            <div id="view-diagnostics" class="view">
                <div class="view-header">
                    <h2>Diagnostics</h2>
                    <p>System diagnostics and health monitoring</p>
                </div>
                <div class="view-content">
                    <div class="card">
                        <h3>System Status</h3>
                        <div class="status-grid">
                            <div class="status-item">
                                <span class="status-label">CPU Usage:</span>
                                <span class="status-value">45%</span>
                                <div class="status-indicator status-ok"></div>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Memory:</span>
                                <span class="status-value">2.1 GB / 4 GB</span>
                                <div class="status-indicator status-ok"></div>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Temperature:</span>
                                <span class="status-value">42¬∞C</span>
                                <div class="status-indicator status-ok"></div>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Communication:</span>
                                <span class="status-value">Online</span>
                                <div class="status-indicator status-ok"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Recent Events</h3>
                        <div class="event-log">
                            <div class="event-item">
                                <span class="event-time">08:25:12</span>
                                <span class="event-message">System check completed successfully</span>
                            </div>
                            <div class="event-item">
                                <span class="event-time">08:15:05</span>
                                <span class="event-message">Configuration updated</span>
                            </div>
                            <div class="event-item">
                                <span class="event-time">08:00:00</span>
                                <span class="event-message">System startup</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Trends View -->
            <div id="view-trends" class="view">
                <div class="view-header">
                    <h2>Trends</h2>
                    <p>Historical data and trend analysis</p>
                </div>
                
                <!-- Trends Controls -->
                <div class="trends-controls">
                    <div class="control-group">
                        <label for="module-selector">Module:</label>
                        <select id="module-selector" class="module-selector">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Time Range:</label>
                        <div class="time-range-buttons">
                            <button class="time-range-btn active" data-range="1h">1 Hour</button>
                            <button class="time-range-btn" data-range="24h">24 Hours</button>
                        </div>
                    </div>
                </div>

                <!-- Trends Charts -->
                <div class="trends-charts-container">
                    <div class="chart-card">
                        <h3>Voltage Level (kV)</h3>
                        <div class="chart-wrapper">
                            <canvas id="voltage-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Current Level (A)</h3>
                        <div class="chart-wrapper">
                            <canvas id="current-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Temperature (¬∞C)</h3>
                        <div class="chart-wrapper">
                            <canvas id="temperature-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Power Factor</h3>
                        <div class="chart-wrapper">
                            <canvas id="power-factor-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alarms View -->
            <div id="view-alarms" class="view">
                <div class="view-header">
                    <h2>Alarms</h2>
                    <p>Active and historical alarms</p>
                </div>
                
                <!-- Filter Controls -->
                <div class="alarms-filters-card">
                    <div class="filters-header">
                        <h3>Filters</h3>
                        <button class="export-btn" id="export-csv-btn">üì• Export to CSV</button>
                    </div>
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label for="severity-filter">Severity:</label>
                            <select id="severity-filter" class="filter-select">
                                <option value="ALL">All</option>
                                <option value="CRITICAL">Critical</option>
                                <option value="WARNING">Warning</option>
                                <option value="DEGRADED">Degraded</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="time-range-filter">Time Range:</label>
                            <select id="time-range-filter" class="filter-select">
                                <option value="1h">Last 1 hour</option>
                                <option value="6h">Last 6 hours</option>
                                <option value="24h" selected>Last 24 hours</option>
                                <option value="7d">Last 7 days</option>
                                <option value="all">All time</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="module-filter">Module:</label>
                            <select id="module-filter" class="filter-select">
                                <option value="ALL">All Modules</option>
                                <!-- Module options will be populated by JavaScript -->
                            </select>
                        </div>
                    </div>
                    <div class="filters-actions">
                        <button class="filter-btn apply-btn" id="apply-filters-btn">Apply Filters</button>
                        <button class="filter-btn clear-btn" id="clear-filters-btn">Clear Filters</button>
                    </div>
                </div>
                
                <!-- Active Alarms Section -->
                <div class="alarms-section">
                    <div class="section-header">
                        <h3>Active Alarms</h3>
                        <span class="alarm-count" id="active-alarm-count">0</span>
                    </div>
                    <div class="alarms-list" id="active-alarms-list">
                        <!-- Active alarms will be rendered here by JavaScript -->
                    </div>
                </div>
                
                <!-- Cleared Alarms Section -->
                <div class="alarms-section">
                    <div class="section-header">
                        <h3>Cleared Alarms</h3>
                        <span class="alarm-count" id="cleared-alarm-count">0</span>
                    </div>
                    <div class="alarms-list" id="cleared-alarms-list">
                        <!-- Cleared alarms will be rendered here by JavaScript -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
